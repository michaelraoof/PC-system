<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" />

    <link
      rel="stylesheet"
      href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css"
      integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk"
      crossorigin="anonymous"
    />
    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/all.css" />

    <link rel="stylesheet" type="text/css" href="style.css" />
    <title></title>
  </head>

  <body>
    <div id="showcase">
      <div id="logo">
        <p style="font-size: 50px; color: red;">
          <img src="gaming.png" width="80" height="80" />
          PC Recommender
        </p>
      </div>

      <header>
        <nav class="navbar navbar-expand-md">
          <button
            class="navbar-toggler"
            type="button"
            data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent"
            aria-expanded="false"
            aria-label="Toggle navigation"
          >
            <span class="navbar-toggler-icon"></span>
          </button>

          <div class="collapse navbar-collapse" id="navbarSupportedContent">
            <ul class="navbar-nav mr-auto navlinks">
              <li class="nav-item">
                <a class="nav-link" href="homeloged.html">
                  <img src="home.png" width="37" height="37" />
                  HOME
                </a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="build.html">
                  <img src="pc.png" width="37" height="37" />
                  BUILD
                </a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="cat.html">
                  <img src="menu.png" width="37" height="37" />
                  Categories
                </a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="./News/news.html">
                  <img src="newspaper.png" width="37" height="37" />
                  NEWS
                </a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="http://localhost/mybb/forumdisplay.php?fid=2" target="_blank">
                  <img src="foru.png" width="37" height="37" />
                  FORUM
                </a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="View_History.html" target="_blank">
                  <img src="history.jpg" width="37" height="37" />
                  History
                </a>
              </li>
            </ul>
          </div>
        </nav>
        <div>
          <div>
            <a class="nav-link" id="user" data-toggle="tooltip" data-placement="bottom" title="My Acc" href="./myaccount/signin.html">
              <img src="user.png" width="40" height="40" />
            </a>
          </div>
          <div>
            <a class="log_out" id="Loged" data-toggle="tooltip" data-placement="bottom" title="My Acc" href="#"></a>
          </div>
          <div class="log_out">
            <a id="log_outt" type="button" href="homeloged.html"></a>
          </div>
        </div>
      </header>

      <div>
        <h2>Collected Components</h2>
        <div class="Sub_compo">
          <img src="cpu-tower.png" width="30" height="30" />
          <p2>Processors</p2>
          <div class="price_type">
            <p3 class="p3" id="Processor"></p3>
            <p3 class="p3" id="Priceofprocessor"></p3>
          </div>
        </div>

        <div class="Sub_compo">
          <img src="gpu.png" width="30" height="30" />
          <p2>Graghic Card</p2>
          <div class="price_type">
            <p3 class="p3" id="GraphicCard"></p3>
            <p3 class="p3" id="Priceofgraphiccard"></p3>
          </div>
        </div>

        <div class="Sub_compo">
          <img src="motherboard.png" width="30" height="30" />
          <p2>Motherboards</p2>
          <div class="price_type">
            <p3 class="p3" id="Motherboard"></p3>
            <p3 class="p3" id="Priceofmotherboard"></p3>
          </div>
        </div>

        <div class="Sub_compo">
          <img src="ram-memo.png" width="30" height="30" />
          <p2>Ram</p2>
          <div class="price_type">
            <p3 class="p3" id="Ram"></p3>
            <p3 class="p3" id="Priceofram"></p3>
          </div>
        </div>

        <div class="Sub_compo">
          <img src="storage.png" width="30" height="30" />
          <p2>Storage</p2>
          <div class="price_type">
            <p3 class="p3" id="Storage"></p3>
            <p3 class="p3" id="Priceofstorage"></p3>
          </div>
        </div>

        <div class="Sub_compo">
          <img src="cpu-cooler.png" width="30" height="30" />
          <p2>CPU Cooler</p2>
          <div class="price_type">
            <p3 class="p3" id="CPUCooler"></p3>
            <p3 class="p3" id="Priceofcppucooler"></p3>
          </div>
        </div>

        <div class="Sub_compo">
          <img src="supply.png" width="30" height="30" />
          <p2>Power Supply :</p2>
          <div class="price_type">
            <p3 class="p3" id="PowerSupply"></p3>
            <p3 class="p3" id="Priceofpwoersupply"></p3>
          </div>
        </div>

        <div class="Sub_compo">
          <p2 id="Total"></p2>
          <br />
          <br />
          <p2>
            Buy :
            <a target="blank" class="link" href="https://www.newegg.com/">New Egg</a>
          </p2>
        </div>

        <div class="submit_div">
          <br />
          >


          <a href="homeloged.html"  >
  
            <button id="btn" class="submit" onclick="done()" style="width: 10rem; height: 3.5rem;" >
              Save 
            </button>
          </a>
        </div>
      </div>
      </div>
    </div>
    <script>
      var done=()=>{
        alert("Data saved")
      }
    </script>
    <script type="text/javascript" src="./ip.js"></script>
    <script>
      const opts = {
        Flag: sessionStorage.getItem("Flag"),
      };
      fetch(`${ip}/api/users/displaycompinations`, {
        method: "POST", // *GET, POST, PUT, DELETE, etc.
        // no-cors, *cors, same-origin
        cache: "no-cache", // *default, no-cache, reload, force-cache, only-if-cached
        credentials: "same-origin", // include, *same-origin, omit
        headers: {
          "Content-Type": "application/json",

          // 'Content-Type': 'application/x-www-form-urlencoded',
        },
        redirect: "follow", // manual, *follow, error
        referrerPolicy: "no-referrer", // no-referrer, *client
        body: JSON.stringify(opts),
      })
        .then((Response) => {
          return Response.json();
        })
        .then((element) => {
          // display data
          console.log(element);
          element = element[0];
          document.getElementById("Processor").innerHTML = "Type: " + element.Processor;
          document.getElementById("Priceofprocessor").innerHTML += "Price: " + element.Priceofprocessor;
          document.getElementById("GraphicCard").innerHTML += "Type: " + element.GraphicCard;
          document.getElementById("Priceofgraphiccard").innerHTML += "Price: " + element.Priceofgraphiccard;
          document.getElementById("Motherboard").innerHTML += "Type: " + element.Motherboard;
          document.getElementById("Priceofmotherboard").innerHTML += "Price: " + element.Priceofmotherboard;
          document.getElementById("Ram").innerHTML += "Type: " + element.Ram;
          document.getElementById("Priceofram").innerHTML += "Price: " + element.Priceofram;
          document.getElementById("Storage").innerHTML += "Type: " + element.Storage;
          document.getElementById("Priceofstorage").innerHTML += "Price: " + element.Priceofstorage;
          document.getElementById("CPUCooler").innerHTML += "Type: " + element.CPUCooler;
          document.getElementById("Priceofcppucooler").innerHTML += "Price: " + element.Priceofcppucooler;
          document.getElementById("PowerSupply").innerHTML += "Type: " + element.PowerSupply;
          document.getElementById("Priceofpwoersupply").innerHTML += "Price: " + element.Priceofpwoersupply;
          document.getElementById("Total").innerHTML += "ToTal: " + element.Total;

          const btn = document.querySelector("#btn");
          btn.onclick = function () {
            // location.replace("./homeloged.html");
            const opts = {
              Processor: element.Processor,
              Priceofprocessor: element.Priceofprocessor,
              GraphicCard: element.GraphicCard,
              Priceofgraphiccard: element.Priceofgraphiccard,
              Motherboard: element.Motherboard,
              Priceofmotherboard: element.Priceofmotherboard,
              Ram: element.Ram,
              Priceofram: element.Priceofram,
              Storage: element.Storage,
              Priceofstorage: element.Priceofstorage,
              CPUCooler: element.CPUCooler,
              Priceofcppucooler: element.Priceofcppucooler,
              Priceofstorage: element.Priceofstorage,
              PowerSupply: element.PowerSupply,
              Priceofpwoersupply: element.Priceofpwoersupply,
              Total: element.Total,
            };
            fetch(`${ip}/api/users/savehistory`, {
              method: "POST", // *GET, POST, PUT, DELETE, etc.
              // no-cors, *cors, same-origin
              cache: "no-cache", // *default, no-cache, reload, force-cache, only-if-cached
              credentials: "same-origin", // include, *same-origin, omit
              headers: {
                Authorization: localStorage.getItem("token"),
                "Content-Type": "application/json",

                // 'Content-Type': 'application/x-www-form-urlencoded',
              },
              redirect: "follow", // manual, *follow, error
              referrerPolicy: "no-referrer", // no-referrer, *client
              body: JSON.stringify(opts),
            })
              .then((Response) => {
                return Response.json();
              })
              .then((element) => {
                console.log(element);
              });
          };
        })
        .catch((err) => console.log(err));
    </script>
    <script>
      const first = document.getElementById("log_outt");
      first.addEventListener("click", function (e) {
        e.preventDefault();
        localStorage.clear();
        document.getElementById("Loged").innerHTML = "";
        document.getElementById("log_outt").innerHTML = "";

        location.replace("homeloged.html");
      });
    </script>
    <script>
      if (localStorage.getItem("token") !== null) {
        //in the sys
        console.log("in");
        document.getElementById("user").style.visibility = "hidden";
        document.getElementById("Loged").innerHTML = "Name: " + localStorage.getItem("name");
        document.getElementById("log_outt").innerHTML = "Log out";
      } else {
        //out the sys
        console.log("out");
        document.getElementById("user").style.visibility = "visible";
      }
    </script>

  </body>
</html>
